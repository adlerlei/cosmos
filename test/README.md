# 🧪 Cosmos API 通訊功能測試

## 📋 測試概述

本目錄包含 Cosmos 框架 API 通訊功能的完整測試套件。

## 📁 檔案說明

### `cosmos-api-test.html`
完整的 API 功能測試頁面，包含：
- **測試 1**: GET 請求測試
- **測試 2**: POST 請求與表單數據測試
- **測試 3**: 錯誤處理機制測試
- **測試 4**: 模板字符串功能測試

## 🚀 如何執行測試

1. **開啟測試頁面**
   ```
   在瀏覽器中開啟：test/cosmos-api-test.html
   ```

2. **執行測試**
   - 依序點擊各個測試卡片中的按鈕
   - 觀察測試結果和狀態變化
   - 檢查頁面底部的測試摘要

3. **查看結果**
   - ✅ 綠色邊框：測試通過
   - ❌ 紅色邊框：測試失敗
   - 🔵 藍色邊框：測試進行中

## ✅ 預期測試結果

### 測試 1: GET 請求
- **預期結果**: 成功獲取 JSONPlaceholder 用戶資料
- **驗證點**: 顯示用戶名稱和郵箱

### 測試 2: POST 請求
- **預期結果**: 成功提交表單數據
- **驗證點**: 返回新創建的文章 ID
- **注意**: 需要填寫標題和內容欄位

### 測試 3: 錯誤處理
- **預期結果**: 正確捕獲網路錯誤
- **驗證點**: 顯示錯誤訊息而非成功訊息

### 測試 4: 模板字符串
- **預期結果**: 正確處理模板變數替換
- **驗證點**: 在 Cosmos 訊息區域顯示格式化訊息

## 🔧 API 功能驗證清單

- [ ] **HTTP 方法支援**
  - [ ] GET 請求
  - [ ] POST 請求
  - [ ] PUT 請求（在程式碼中已實現）
  - [ ] DELETE 請求（在程式碼中已實現）

- [ ] **回應處理**
  - [ ] onSuccess 處理器
  - [ ] onError 處理器
  - [ ] onLoading 處理器

- [ ] **數據處理**
  - [ ] JSON 回應解析
  - [ ] 表單數據自動收集
  - [ ] 模板字符串替換

- [ ] **錯誤處理**
  - [ ] 網路錯誤捕獲
  - [ ] HTTP 狀態碼錯誤
  - [ ] 無效 URL 處理

## 🐛 常見問題排除

### 問題 1: 按鈕點擊無反應
**解決方案**: 檢查瀏覽器控制台是否有 JavaScript 錯誤

### 問題 2: API 請求失敗
**解決方案**: 
- 確認網路連線正常
- 檢查是否被 CORS 政策阻擋
- 驗證 API 端點是否可用

### 問題 3: 模板字符串不顯示
**解決方案**: 模板字符串會顯示在 Cosmos 內建的訊息區域，不是測試結果區域

## 📊 測試報告格式

測試完成後，頁面會顯示：
- 總測試數: 4
- 通過測試數
- 失敗測試數
- 成功率百分比

## 🔗 相關檔案

- **核心程式碼**: `src/cosmos.js`
- **API 文件**: `docs/zh-TW/api文件.md`
- **使用範例**: `examples/api-demo.html`

## 📝 測試注意事項

1. **網路依賴**: 測試需要網路連線來訪問 JSONPlaceholder API
2. **瀏覽器支援**: 需要支援 ES6+ 和 Fetch API 的現代瀏覽器
3. **CORS**: 使用的測試 API 支援跨域請求
4. **實例分離**: 每個 API 請求都使用獨立的 Cosmos 實例

## 🎯 測試目標

確保 Cosmos 框架的 API 通訊功能：
- 穩定可靠
- 易於使用
- 錯誤處理完善
- 符合積木式設計理念
